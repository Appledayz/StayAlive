<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.stay.alive.company.mapper.CompanyMapper" >
	<select id="selectMemberRatingAndOption" parameterType="String" resultType="com.stay.alive.member.vo.Member">
		SELECT rating_no, rating_name, member_option_no, member_option_name FROM member WHERE member_id = #{memberId}
	</select>
	<insert id="insertCompany" parameterType="com.stay.alive.company.vo.Company">
		INSERT INTO company(member_id, company_name, company_homepage, company_address, company_email, company_detail, rating_no, rating_name, member_option_no, member_option_name, company_register_date) VALUES(#{memberId}, #{companyName}, #{companyHomepage}, #{companyAddress}, #{companyEmail}, #{companyDetail}, #{ratingNo}, #{ratingName}, #{memberOptionNo}, #{memberOptionName}, now())
	</insert>
	<select id="selectCompanySearchListCount" resultType="int" parameterType="HashMap">
        SELECT 
        	COUNT(*)
       	FROM company
       	WHERE #{searchKey1} LIKE #{searchWord} OR #{searchKey2} LIKE #{searchWord}
    </select>
	<select id="selectCompanySearchList" resultType="com.stay.alive.company.vo.Company" parameterType="HashMap">
        SELECT 
        	company_name as companyName, member_id as memberId 
       	FROM company
       	WHERE #{searchKey1} LIKE #{searchWord} OR #{searchKey2} LIKE #{searchWord}
       	ORDER BY company_no DESC LIMIT #{pageMaker.startRow}, #{pageMaker.rowPerPage}
    </select>
    <select id="selectMemberAndCompanySearchList" resultType="Hashmap" parameterType="HashMap">
        SELECT 
        	c.company_name as companyName, c.member_id as memberId, m.member_nickname as memberNickname
       	FROM member m INNER JOIN company c
       	ON m.member_id = c.member_id
       	ORDER BY c.company_no DESC LIMIT #{pageMaker.startRow}, #{pageMaker.rowPerPage}
    </select>
</mapper>
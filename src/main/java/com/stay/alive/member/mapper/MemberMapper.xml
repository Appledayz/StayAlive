<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.stay.alive.member.mapper.MemberMapper">
	<!-- 회원정보 입력 -->
	<insert id="insertMember" parameterType="com.stay.alive.member.vo.Member">	
		INSERT INTO member(member_no,
						member_id,
						member_password,
						member_name,
						member_nickname,
						member_birth,
						member_phone_number1,
						member_email,
						member_email_accept,
						member_sms_accept,
						state_no,
						state_name,
						group_no,
						group_name,
						rating_no,
						rating_name,
						member_option_no,
						member_option_name,
						member_register_date,
						member_lastupdate_date,
						member_lastlogout_date,
						member_lastlogin_date,
						member_login_count)
	    VALUES (#{memberNo},
			#{memberId},
			#{memberPassword},
			#{memberName},
			#{memberNickname},
			#{memberBirth},
			#{memberPhoneNumber1},
			#{memberEmail},
			#{memberEmailAccept},
			#{memberSmsAccept},
			1,
			123,
			1,
			123,
			1,
			123,
			1,
			123,
			now(),
			now(),
			now(),
			now(),
			1);
	</insert>
	<!-- 아이디 중복 확인 -->
	<select id="idCheck" resultType="com.stay.alive.member.vo.Member">
		SELECT member_id from member
			where member_id = #{memberId}
	</select>
	<!-- 닉네임 중복확인 -->
	<select id="nicknameCheck" resultType="com.stay.alive.member.vo.Member">
		SELECT member_nickname from member
			where member_nickname = #{memberNickname}
	</select>
	<!-- 회원 정보 수정 액션 -->
	<update id="updateMember" parameterType="com.stay.alive.member.vo.Member">
		UPDATE member
			SET member_password = #{memberPassword},
			member_name = #{memberName},
			member_nickname = #{memberNickname},
			member_birth = #{memberBirth},
			member_phone_number1 = #{memberPhoneNumber1},
			member_email = #{memberEmail},
			member_email_accept = #{memberEmailAccept},
			member_sms_accept = #{memberSmsAccept},
			WHERE member_id = #{memberId}
    </update>
    <!-- 회원 정보 수정 폼 -->
    <select id="selectOne" parameterType="String" resultType="com.stay.alive.member.vo.Member">
        SELECT member_id as memberId,
        	member_password as memberPassword,
        	member_name as memberName,
			member_nickname as memberNickname,
			member_birth as memberBirth,
			member_phone_number1 as memberPhoneNumber1,
			member_email as memberEmail,
			member_email_accept as memberEmailAccept,
			member_sms_accept as memberSmsAccept
	        FROM member
	        WHERE member_id = #{memberId}
    </select>
</mapper>
	
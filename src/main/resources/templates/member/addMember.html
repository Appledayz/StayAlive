<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>회원가입</title>
<script src='https://code.jquery.com/jquery-3.3.1.min.js'></script>
</head>
<body>
	<form action="/member/addMember" method="POST" id="addMemberForm">
	<table border="1" style="margin:0 auto;">
		<tr>
			<td>아이디</td>
			<td>
				<input type="text" id="memberId" name="memberId">
				<button type="button" class="idCheck">아이디 확인</button>
				<p class="result"><span class="msg">아이디를 확인해주십시오.</span></p>
			</td>
		</tr>
		<tr>
			<td>비밀번호</td><td><input type="password" name="memberPassword"></td>
		</tr>
		<tr>
			<td>성명</td><td><input type="text" name="memberName"></td>
		</tr>
		<tr>
			<td>닉네임</td>
			<td>
				<input type="text" id="memberNickname" name="memberNickname">
				<button type="button" class="nicknameCheck">닉네임 확인</button>
				<p class="result2"><span class="msg2">닉네임을 확인해주십시오.</span></p>
			</td>
		</tr>
		<tr>
			<td>생년월일</td><td><input type="date" name="memberBirth"></td>
		</tr>
		<tr>
			<td>연락처</td><td><input type="text" name="memberPhoneNumber1"></td>
		</tr>
		<tr>
			<td>이메일</td><td><input type="text" name="memberEmail"></td>
		</tr>
		<tr>
			<td>이메일 수신동의</td><td><input type="radio" name="memberEmailAccept" value="Y" checked>동의<input type="radio" name="memberEmailAccept" value="N">거절</td>
		</tr>
		<tr>
			<td>sms수신동의</td><td><input type="radio" name="memberSmsAccept" value="Y" checked>동의<input type="radio" name="memberSmsAccept" value="N">거절</td>
		</tr>
		<tr>
			<td><button type="submit" id="submit" disabled="disabled" onClick="check()">가입</button></td>
		</tr>
	</table>
	</form>
<script>
	//1.아이디 확인

	$(".idCheck").click(function(){		
		var query = {memberId : $("#memberId").val()};
		
		if ($("#memberId").val() == ""){
			$(".result .msg").text("아이디를 입력하세요.");
			$(".result .msg").attr("style", "color:#00f");
			return;
		};
		
		$.ajax({
			url : "/idCheck",
			type : "post",
			data : query,
			success : function(data) {
				if(data == 1) {
					$(".result .msg").text("사용 불가");
					$(".result .msg").attr("style", "color:#f00");
				} else {
					$(".result .msg").text("사용 가능");
					$(".result .msg").attr("style", "color:#00f");
	
				}
			}
		});  // ajax 끝
	});
	$("#memberId").keyup(function(){
		$(".result .msg").text("아이디를 확인해주십시오.");
		$(".result .msg").attr("style", "color:#000");
		$("#submit").attr("disabled", "disabled");
	});
	
	//2.닉네임 확인
	$(".nicknameCheck").click(function(){
		var inputed = {memberNickname : $("#memberNickname").val()};
		
		$.ajax({
			url : "/nicknameCheck",
			type : "post",
			data : inputed,
			success : function(data) {
				if(data == 1) {
					$(".result2 .msg2").text("사용 불가");
					$(".result2 .msg2").attr("style", "color:#f00");
					$("#submit").attr("disabled", "disabled");
				} else {
					$(".result2 .msg2").text("사용 가능");
					$(".result2 .msg2").attr("style", "color:#00f");
					$("#submit").removeAttr("disabled");
				}
			}
		});  // ajax 끝
	});
	$("#memberNickname").keyup(function(){
	$(".result2 .msg2").text("닉네임을 확인해주십시오.");
	$(".result2 .msg2").attr("style", "color:#000");
	$("#submit").attr("disabled", "disabled");
	});
</script>
</body>
</html>